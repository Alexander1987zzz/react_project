{"ast":null,"code":"var _jsxFileName = \"D:\\\\11\\\\react_project\\\\src\\\\componetns\\\\MainPage.js\";\nimport React, { Component } from 'react';\nimport UserForm from \"./UserForm\";\nimport UserList from \"./UserList\";\nimport UserService from \"../UserService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MainPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      user: {\n        \"id\": 0,\n        \"name\": '',\n        \"surname\": '',\n        \"age\": '',\n        \"email\": ''\n      },\n      show: true\n    };\n    this.removeUser = this.removeUser.bind(this);\n    this.addUser = this.addUser.bind(this);\n    this.editUser = this.editUser.bind(this);\n    this.saveUser = this.saveUser.bind(this);\n    this.showFormAddUser = this.showFormAddUser.bind(this);\n  }\n\n  componentDidMount() {\n    UserService.getUsers().then(data => {\n      this.setState({\n        users: data\n      });\n    });\n  }\n\n  saveUser(user) {\n    if (user.id === 0) {\n      this.addUser(user);\n    } else {\n      this.updateUser(user);\n    }\n  }\n\n  editUser(user) {\n    this.setState({\n      user: user\n    });\n  }\n\n  addUser(user) {\n    fetch(\"http://109.227.122.143:9000/rest/persons\", {\n      body: JSON.stringify({\n        user\n      }),\n      mode: \"cors\",\n      method: \"POST\"\n    }).then(response => {\n      alert(\"status \" + response.status);\n\n      if (response.ok) {\n        response.json().then(data => {\n          let updatedUsers = [...this.state.users, data];\n          this.setState({\n            users: updatedUsers\n          });\n        });\n      } else {\n        alert('not added');\n      }\n    });\n  }\n\n  updateUser(user) {\n    fetch(\"http://109.227.122.143:9000/rest/persons\", {\n      mode: \"cors\",\n      body: JSON.stringify({\n        user\n      }),\n      method: \"POST\"\n    }).then(response => {\n      alert(\"status from update\" + response.status);\n\n      if (response.ok) {\n        const updateIndex = this.state.users.findIndex(item => item.id === user.id);\n        let updatedUsers = [...this.state.users.slice(0, updateIndex), user, ...this.state.users.slice(updateIndex + 1)];\n        this.setState({\n          users: updatedUsers\n        });\n      } else {\n        alert('not deleted');\n      }\n    });\n  }\n\n  removeUser(user) {\n    alert(\"dell \" + user.id);\n    fetch(\"http://109.227.122.143:9000/rest/persons\", {\n      mode: \"cors\",\n      body: JSON.stringify({\n        user\n      }),\n      method: \"DELETE\"\n    }).then(response => {\n      alert(response.status);\n\n      if (response.ok) {\n        let updatedUsers = [...this.state.users].filter(i => i.id !== user.id);\n        this.setState({\n          users: updatedUsers\n        });\n      } else {\n        alert(\"not deleted\");\n      }\n    });\n  }\n\n  showFormAddUser(some) {\n    this.setState({\n      show: some\n    });\n  }\n\n  render() {\n    document.body.style.background = \"linear-gradient(to bottom, #33ccff 0%, #ff99cc 100%)\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(UserForm, {\n        users: this.state.users,\n        saveUser: this.saveUser,\n        userAttr: this.state.user,\n        show: this.state.show,\n        showFormAddUser: this.showFormAddUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UserList, {\n        users: this.state.users,\n        removeUser: this.removeUser,\n        editUser: this.editUser,\n        show: this.state.show,\n        showFormAddUser: this.showFormAddUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MainPage;","map":{"version":3,"sources":["D:/11/react_project/src/componetns/MainPage.js"],"names":["React","Component","UserForm","UserList","UserService","MainPage","constructor","props","state","users","user","show","removeUser","bind","addUser","editUser","saveUser","showFormAddUser","componentDidMount","getUsers","then","data","setState","id","updateUser","fetch","body","JSON","stringify","mode","method","response","alert","status","ok","json","updatedUsers","updateIndex","findIndex","item","slice","filter","i","some","render","document","style","background"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport UserForm from \"./UserForm\";\nimport UserList from \"./UserList\";\nimport UserService from \"../UserService\";\n\nclass MainPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            users: [],\n            user: {\n                \"id\": 0,\n                \"name\": '',\n                \"surname\": '',\n                \"age\": '',\n                \"email\": ''\n            },\n            show: true\n        };\n\n        this.removeUser = this.removeUser.bind(this);\n        this.addUser = this.addUser.bind(this);\n        this.editUser = this.editUser.bind(this);\n        this.saveUser = this.saveUser.bind(this);\n        this.showFormAddUser = this.showFormAddUser.bind(this);\n    }\n\n    componentDidMount() {\n        UserService.getUsers()\n\n                        .then(data => {\n                                this.setState({users: data})\n                            }\n                        )\n\n\n    }\n\n    saveUser(user) {\n        if (user.id === 0) {\n            this.addUser(user)\n        } else {\n            this.updateUser(user)\n        }\n\n    }\n\n    editUser(user) {\n        this.setState({user:user})\n    }\n\n    addUser(user) {\n        fetch(\"http://109.227.122.143:9000/rest/persons\", {\n            body: JSON.stringify({user}),\n            mode: \"cors\",\n            method: \"POST\",\n        }).then(response => {\n                alert(\"status \" + response.status)\n                if (response.ok) {\n                    response.json()\n                        .then(data => {\n                            let updatedUsers = [\n                                ...this.state.users,\n                                data\n                            ]\n                            this.setState({users: updatedUsers});\n                            }\n                        )\n                } else {\n                    alert('not added')\n                }\n            }\n        );\n    }\n\n    updateUser(user) {\n\n        fetch(\"http://109.227.122.143:9000/rest/persons\", {\n            mode: \"cors\",\n            body: JSON.stringify({user}),\n            method: \"POST\",\n        })\n            .then(response => {\n                    alert(\"status from update\" + response.status)\n                    if (response.ok) {\n                        const updateIndex = this.state.users.findIndex(item => item.id === user.id)\n                        let updatedUsers = [...this.state.users.slice(0, updateIndex), user, ...this.state.users.slice(updateIndex + 1)]\n                        this.setState({users: updatedUsers});\n                    } else {\n                        alert('not deleted')\n                    }\n                }\n            )\n    }\n\n    removeUser(user) {\n        alert(\"dell \" + user.id)\n        fetch(\"http://109.227.122.143:9000/rest/persons\", {\n            mode: \"cors\",\n            body: JSON.stringify({user}),\n            method: \"DELETE\",\n        })\n            .then(response => {\n                    alert(response.status)\n                    if (response.ok) {\n                        let updatedUsers = [...this.state.users].filter(i => i.id !== user.id);\n                        this.setState({users: updatedUsers});\n                    } else {\n                        alert(\"not deleted\")\n                    }\n                }\n            )\n    }\n\n    showFormAddUser(some) {\n        this.setState({show: some})\n    }\n\n    render() {\n        document.body.style.background = \"linear-gradient(to bottom, #33ccff 0%, #ff99cc 100%)\";\n        return (\n            <div align={\"center\"}>\n                <UserForm users={this.state.users}\n                          saveUser={this.saveUser}\n                          userAttr={this.state.user}\n                          show={this.state.show}\n                          showFormAddUser={this.showFormAddUser}/>\n                <UserList users={this.state.users}\n                          removeUser={this.removeUser}\n                          editUser={this.editUser}\n                          show={this.state.show}\n                          showFormAddUser={this.showFormAddUser}/>\n            </div>\n        )\n    }\n}\n\nexport default MainPage;"]},"metadata":{},"sourceType":"module"}