{"ast":null,"code":"var _jsxFileName = \"D:\\\\11\\\\react_project\\\\src\\\\componetns\\\\MainPage.js\";\nimport React, { Component } from 'react';\nimport UserForm from \"./UserForm\";\nimport UserList from \"./UserList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MainPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      user: {\n        \"id\": 0,\n        \"name\": '',\n        \"surname\": '',\n        \"age\": '',\n        \"email\": ''\n      }\n    };\n    this.removeUser = this.removeUser.bind(this);\n    this.addUser = this.addUser.bind(this);\n    this.editUser = this.editUser.bind(this);\n    this.saveUser = this.saveUser.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:9000/rest/persons\").then(response => {\n      alert(response.status);\n      response.json().then(data => {\n        this.setState({\n          users: data\n        });\n      });\n    });\n  }\n\n  removeUser(user) {\n    alert(\"dell \" + user.id);\n    fetch(\"http://localhost:9000/rest/persons\", {\n      mode: \"cors\",\n      body: JSON.stringify(user),\n      method: \"DELETE\"\n    }).then(response => {\n      alert(response.status);\n      let updatedUsers = [...this.state.users].filter(i => i.id !== user.id);\n      this.setState({\n        users: updatedUsers\n      });\n    });\n  }\n\n  saveUser(user) {\n    if (user.id === 0) {\n      this.addUser(user);\n    } else {\n      this.updateUser(user);\n    }\n  }\n\n  updateUser(user) {\n    alert(\"update\");\n    fetch(\"http://localhost:9000/rest/persons\", {\n      mode: \"cors\",\n      body: JSON.stringify({\n        user\n      }),\n      method: \"POST\"\n    }).then(response => {\n      alert(response.status);\n      const updateIndex = this.state.users.findIndex(item => item.id === user.id);\n      let updatedUsers = [...this.state.users.slice(0, updateIndex), user, ...this.state.users.slice(updateIndex + 1)];\n      this.setState({\n        users: updatedUsers\n      });\n    });\n  }\n\n  addUser(user) {\n    /*fetch(\"http://localhost:8081/projectX/rest/persons\", {\r\n        body: JSON.stringify(user),\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        }\r\n    })\r\n        .then(response => {\r\n                alert(response.status)\r\n                if (response.ok) {\r\n                    let updatedUsers = [\r\n                        ...this.state.users,\r\n                        user\r\n                    ]\r\n                    this.setState({users: updatedUsers});\r\n                } else {\r\n                    alert('not deleted')\r\n                }\r\n            }\r\n        )*/\n    alert(\"id \" + user.id);\n    fetch(\"http://localhost:9000/rest/persons\", {\n      body: JSON.stringify({\n        user\n      }),\n      mode: \"no-cors\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      alert(\"status \" + response.status);\n      /* alert(response.status)\r\n       response.json()\r\n           .then(data => {\r\n                   this.setState({users: data})\r\n               }\r\n           )\r\n      }\r\n      )*/\n\n      let updatedUsers = [...this.state.users, user];\n      this.setState({\n        users: updatedUsers\n      });\n    });\n  }\n\n  editUser(user) {\n    this.state.user.id = user.id;\n    this.setState({\n      user: user\n    });\n  }\n\n  render() {\n    document.body.style.backgroundColor = \"rgba(167,165,74,0.35)\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(UserForm, {\n        users: this.state.users,\n        saveUser: this.saveUser,\n        userAttr: this.state.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UserList, {\n        users: this.state.users,\n        removeUser: this.removeUser,\n        editUser: this.editUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MainPage;","map":{"version":3,"sources":["D:/11/react_project/src/componetns/MainPage.js"],"names":["React","Component","UserForm","UserList","MainPage","constructor","props","state","users","user","removeUser","bind","addUser","editUser","saveUser","componentDidMount","fetch","then","response","alert","status","json","data","setState","id","mode","body","JSON","stringify","method","updatedUsers","filter","i","updateUser","updateIndex","findIndex","item","slice","headers","render","document","style","backgroundColor"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport UserForm from \"./UserForm\";\r\nimport UserList from \"./UserList\";\r\n\r\nclass MainPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            user: {\r\n                \"id\": 0,\r\n                \"name\": '',\r\n                \"surname\": '',\r\n                \"age\": '',\r\n                \"email\": ''\r\n            }\r\n        };\r\n\r\n        this.removeUser = this.removeUser.bind(this);\r\n        this.addUser = this.addUser.bind(this);\r\n        this.editUser = this.editUser.bind(this);\r\n        this.saveUser = this.saveUser.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"http://localhost:9000/rest/persons\")\r\n            .then(response => {\r\n                    alert(response.status)\r\n                    response.json()\r\n                        .then(data => {\r\n                                this.setState({users: data})\r\n                            }\r\n                        )\r\n                }\r\n            )\r\n    }\r\n\r\n    removeUser(user) {\r\n        alert(\"dell \" + user.id)\r\n        fetch(\"http://localhost:9000/rest/persons\", {\r\n            mode: \"cors\",\r\n            body: JSON.stringify(user),\r\n            method: \"DELETE\",\r\n\r\n        })\r\n            .then(response => {\r\n                    alert(response.status)\r\n                    let updatedUsers = [...this.state.users].filter(i => i.id !== user.id);\r\n                    this.setState({users: updatedUsers});\r\n                }\r\n            )\r\n    }\r\n\r\n    saveUser(user) {\r\n        if (user.id === 0) {\r\n            this.addUser(user)\r\n        } else {\r\n            this.updateUser(user)\r\n        }\r\n    }\r\n\r\n    updateUser(user) {\r\n        alert(\"update\")\r\n\r\n        fetch(\"http://localhost:9000/rest/persons\", {\r\n            mode: \"cors\",\r\n            body: JSON.stringify({user}),\r\n            method: \"POST\",\r\n\r\n        })\r\n            .then(response => {\r\n                    alert(response.status)\r\n\r\n                    const updateIndex = this.state.users.findIndex(item => item.id === user.id)\r\n                    let updatedUsers = [...this.state.users.slice(0, updateIndex), user, ...this.state.users.slice(updateIndex + 1)]\r\n                    this.setState({users: updatedUsers});\r\n\r\n                }\r\n            )\r\n\r\n\r\n    }\r\n\r\n    addUser(user) {\r\n        /*fetch(\"http://localhost:8081/projectX/rest/persons\", {\r\n            body: JSON.stringify(user),\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            }\r\n        })\r\n            .then(response => {\r\n                    alert(response.status)\r\n                    if (response.ok) {\r\n                        let updatedUsers = [\r\n                            ...this.state.users,\r\n                            user\r\n                        ]\r\n                        this.setState({users: updatedUsers});\r\n                    } else {\r\n                        alert('not deleted')\r\n                    }\r\n                }\r\n            )*/\r\n        alert(\"id \" + user.id)\r\n        fetch(\"http://localhost:9000/rest/persons\", {\r\n            body: JSON.stringify({user}),\r\n            mode: \"no-cors\",\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            }\r\n        }).then(response => {\r\n                alert(\"status \" + response.status)\r\n\r\n                /* alert(response.status)\r\n                 response.json()\r\n                     .then(data => {\r\n                             this.setState({users: data})\r\n                         }\r\n                     )\r\n             }\r\n         )*/\r\n                let updatedUsers = [\r\n                    ...this.state.users,\r\n                    user\r\n                ]\r\n                this.setState({users: updatedUsers});\r\n            }\r\n        );\r\n    }\r\n\r\n    editUser(user) {\r\n        this.state.user.id = user.id\r\n        this.setState({user: user})\r\n    }\r\n\r\n    render() {\r\n        document.body.style.backgroundColor = \"rgba(167,165,74,0.35)\";\r\n        return (\r\n            <div align={\"center\"}>\r\n                <UserForm users={this.state.users} saveUser={this.saveUser} userAttr={this.state.user}/>\r\n                <UserList users={this.state.users} removeUser={this.removeUser} editUser={this.editUser}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MainPage;"]},"metadata":{},"sourceType":"module"}